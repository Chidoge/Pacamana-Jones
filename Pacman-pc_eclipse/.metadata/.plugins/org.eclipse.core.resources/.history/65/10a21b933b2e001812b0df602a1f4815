package group23.pacman.view;

import group23.pacman.MainApp;
import group23.pacman.controller.GameStateController;
import group23.pacman.model.Game;
import javafx.animation.AnimationTimer;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.canvas.Canvas;
import javafx.scene.canvas.GraphicsContext;
import javafx.stage.Stage; 
import javafx.scene.image.*;
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyEvent;

public class GameViewController {
	
	private MainApp mainApp;
	
	private GameStateController gameStateController;
	
	private char map;l
	private boolean running;
	
	public GameViewController(Game game) {
		
		
		gameStateController = new GameStateController(this,game);
		
	}
	
	public void setMap(char map) {
		
	}
	
	public void setGameMode(int mode) {
		
	}
	
	public void start() {
		
		new AnimationTimer() {
			public void handle(long time) {	
				if (running == true) {
					graphicsContext.clearRect(0, 0, 1366, 768);
					gameStateController.update();
					draw(graphicsContext);
				}
			}
		}.start();
	}
	
	public void draw(GraphicsContext graphicsContext) {
		
		gameStateController.getGame().getPacman().draw(graphicsContext);
		gameStateController.getGame().getGhost().draw(graphicsContext);
		gameStateController.getGame().drawObjects(graphicsContext);
	}
	
	/* Pauses/starts the game */
	public void changeState() {
		
		this.running = !this.running;
	}
	
	
	public void setMainApp(MainApp mainApp) {
		
		this.mainApp = mainApp;
	}
}
